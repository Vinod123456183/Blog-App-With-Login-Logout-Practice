<%- include('layout/header') %>

<div
  class="container bg-gray-100 mx-auto p-6 flex items-center justify-center flex-col"
>
  <h2 class="text-3xl font-bold text-center pb-6 text-blue-600">
    Search Results 🔎
  </h2>

  <% if (data.length > 0) { %>
  <ul class="bg-gray-100 p-6 rounded-lg shadow-md space-y-7 w-[75%]">
    <% data.forEach((post) => { let titleWords = post.title.split(" ").slice(0,
    5).join(" "); // Limit title to 5 words %>
    <li
      class="p-5 bg-white rounded-lg transition-transform duration-300 hover:-translate-y-1"
    >
      <div class="flex justify-between items-start">
        <div>
          <h3 class="text-xl font-semibold text-blue-600">
            <!-- changes yaha jo /singlepost so ussi se route bnega -->
            <a href="/singlePost/<%= post._id %>"> <%= titleWords %>... </a>
          </h3>
          <p class="text-gray-700 text-sm mt-2 leading-relaxed">
            <%= post.body.substring(0, 120) %>...
          </p>
        </div>
        <div
          class="text-sm text-gray-500 text-right min-w-fit pl-4 whitespace-nowrap"
        >
          <p class="mb-1">
            🗓️ <span class="font-medium">Created:</span>
            <%= new Date(post.createdAt).toLocaleString() %>
          </p>
          <p>
            ✏️ <span class="font-medium">Updated:</span>
            <%= new Date(post.updatedAt).toLocaleString() %>
          </p>
        </div>
      </div>
    </li>
    <% }); %>
  </ul>
  <% } else { %>
  <p class="text-center text-gray-500 text-lg mt-6">😔 No results found.</p>
  <% } %>
</div>
